'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Stack = exports.DictSet = undefined;
exports.dict = dict;

var _guid = require('./guid');

function dict() {
    return Object.create(null);
}
class DictSet {
    constructor() {
        this.dict = dict();
    }
    add(obj) {
        if (typeof obj === 'string') this.dict[obj] = obj;else this.dict[(0, _guid.ensureGuid)(obj)] = obj;
        return this;
    }
    delete(obj) {
        if (typeof obj === 'string') delete this.dict[obj];else if (obj._guid) delete this.dict[obj._guid];
    }
}
exports.DictSet = DictSet;
class Stack {
    constructor() {
        this.stack = [];
        this.current = null;
    }
    get size() {
        return this.stack.length;
    }
    push(item) {
        this.current = item;
        this.stack.push(item);
    }
    pop() {
        let item = this.stack.pop();
        let len = this.stack.length;
        this.current = len === 0 ? null : this.stack[len - 1];
        return item === undefined ? null : item;
    }
    isEmpty() {
        return this.stack.length === 0;
    }
}
exports.Stack = Stack;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29sbGVjdGlvbnMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wYWNrYWdlcy9AZ2xpbW1lci91dGlsL2xpYi9jb2xsZWN0aW9ucy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7UUFZZ0IsQUFBSTs7QUFacEIsQUFBTyxBQUFXLEFBQVUsQUFBRSxBQUFNLEFBQVEsQUFBQyxBQVk3QyxBQUFNOztnQkFDSjtXQUFPLEFBQU0sT0FBQyxBQUFNLE9BQUMsQUFBSSxBQUFDLEFBQUMsQUFDN0IsQUFBQztBQUlELEFBQU07TUFBTyxBQUFPO2tCQUloQixBQUFJO2FBQUMsQUFBSSxPQUFHLEFBQUksQUFBSyxBQUFDLEFBQ3hCLEFBQUM7QUFFRCxBQUFHO1FBQUMsQUFBTSxLQUNSO1lBQUksT0FBTyxBQUFHLFFBQUssQUFBUSxVQUFFLEFBQUksS0FBQyxBQUFJLEtBQUMsQUFBVSxBQUFDLE9BQUcsQUFBRyxBQUFDLFNBQ3BELEFBQUksS0FBQyxBQUFJLEtBQUMsQUFBVSxzQkFBQyxBQUFVLEFBQUMsQUFBQyxRQUFHLEFBQUcsQUFBQyxBQUM3QztlQUFPLEFBQUksQUFBQyxBQUNkLEFBQUM7QUFFRCxBQUFNO1dBQUMsQUFBTSxLQUNYO1lBQUksT0FBTyxBQUFHLFFBQUssQUFBUSxVQUFFLE9BQU8sQUFBSSxLQUFDLEFBQUksS0FBQyxBQUFVLEFBQUMsQUFBQyxVQUNyRCxJQUFLLEFBQVcsSUFBQyxBQUFLLE9BQUUsT0FBTyxBQUFJLEtBQUMsQUFBSSxLQUFFLEFBQVcsSUFBQyxBQUFLLEFBQUMsQUFBQyxBQUNwRSxBQUFDLEFBQ0Y7QUFFRCxBQUFNO0FBaEJKOztNQWdCVyxBQUFLO2tCQUNSO2FBQUssUUFBUSxBQUFFLEFBQUMsQUFDakI7YUFBTyxVQUFjLEFBQUksQUFBQyxBQXNCbkMsQUFBQztBQXBCQztRQUFXLEFBQUksT0FDYjtlQUFPLEFBQUksS0FBQyxBQUFLLE1BQUMsQUFBTSxBQUFDLEFBQzNCLEFBQUM7QUFFRCxBQUFJO1NBQUMsQUFBTyxNQUNWLEFBQUk7YUFBQyxBQUFPLFVBQUcsQUFBSSxBQUFDLEFBQ3BCLEFBQUk7YUFBQyxBQUFLLE1BQUMsQUFBSSxLQUFDLEFBQUksQUFBQyxBQUFDLEFBQ3hCLEFBQUM7QUFFRCxBQUFHO1VBQ0Q7WUFBSSxBQUFJLE9BQUcsQUFBSSxLQUFDLEFBQUssTUFBQyxBQUFHLEFBQUUsQUFBQyxBQUM1QjtZQUFJLEFBQUcsTUFBRyxBQUFJLEtBQUMsQUFBSyxNQUFDLEFBQU0sQUFBQyxBQUM1QixBQUFJO2FBQUMsQUFBTyxVQUFHLEFBQUcsUUFBSyxBQUFDLEFBQUMsQUFBQyxJQUFDLEFBQUksQUFBQyxBQUFDLE9BQUMsQUFBSSxLQUFDLEFBQUssTUFBQyxBQUFHLE1BQUcsQUFBQyxBQUFDLEFBQUMsQUFFdEQ7ZUFBTyxBQUFJLFNBQUssQUFBUyxBQUFDLEFBQUMsWUFBQyxBQUFJLEFBQUMsQUFBQyxPQUFDLEFBQUksQUFBQyxBQUMxQyxBQUFDO0FBRUQsQUFBTztjQUNMO2VBQU8sQUFBSSxLQUFDLEFBQUssTUFBQyxBQUFNLFdBQUssQUFBQyxBQUFDLEFBQ2pDLEFBQUMsQUFDRjs7QUF4QkQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBIYXNHdWlkLCBlbnN1cmVHdWlkIH0gZnJvbSAnLi9ndWlkJztcbmltcG9ydCB7IE9wdGlvbiB9IGZyb20gJy4vcGxhdGZvcm0tdXRpbHMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIERpY3Q8VD4ge1xuICBbaW5kZXg6IHN0cmluZ106IFQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2V0PFQ+IHtcbiAgYWRkKHZhbHVlOiBUKTogU2V0PFQ+O1xuICBkZWxldGUodmFsdWU6IFQpOiB2b2lkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGljdDxUPigpOiBEaWN0PFQ+IHtcbiAgcmV0dXJuIE9iamVjdC5jcmVhdGUobnVsbCk7XG59XG5cbmV4cG9ydCB0eXBlIFNldE1lbWJlciA9IEhhc0d1aWQgfCBzdHJpbmc7XG5cbmV4cG9ydCBjbGFzcyBEaWN0U2V0PFQgZXh0ZW5kcyBTZXRNZW1iZXI+IGltcGxlbWVudHMgU2V0PFQ+IHtcbiAgcHJpdmF0ZSBkaWN0OiBEaWN0PFQ+O1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZGljdCA9IGRpY3Q8VD4oKTtcbiAgfVxuXG4gIGFkZChvYmo6IFQpOiBTZXQ8VD4ge1xuICAgIGlmICh0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykgdGhpcy5kaWN0W29iaiBhcyBhbnldID0gb2JqO1xuICAgIGVsc2UgdGhpcy5kaWN0W2Vuc3VyZUd1aWQob2JqIGFzIGFueSldID0gb2JqO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZGVsZXRlKG9iajogVCkge1xuICAgIGlmICh0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykgZGVsZXRlIHRoaXMuZGljdFtvYmogYXMgYW55XTtcbiAgICBlbHNlIGlmICgob2JqIGFzIGFueSkuX2d1aWQpIGRlbGV0ZSB0aGlzLmRpY3RbKG9iaiBhcyBhbnkpLl9ndWlkXTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgU3RhY2s8VD4ge1xuICBwcml2YXRlIHN0YWNrOiBUW10gPSBbXTtcbiAgcHVibGljIGN1cnJlbnQ6IE9wdGlvbjxUPiA9IG51bGw7XG5cbiAgcHVibGljIGdldCBzaXplKCkge1xuICAgIHJldHVybiB0aGlzLnN0YWNrLmxlbmd0aDtcbiAgfVxuXG4gIHB1c2goaXRlbTogVCkge1xuICAgIHRoaXMuY3VycmVudCA9IGl0ZW07XG4gICAgdGhpcy5zdGFjay5wdXNoKGl0ZW0pO1xuICB9XG5cbiAgcG9wKCk6IE9wdGlvbjxUPiB7XG4gICAgbGV0IGl0ZW0gPSB0aGlzLnN0YWNrLnBvcCgpO1xuICAgIGxldCBsZW4gPSB0aGlzLnN0YWNrLmxlbmd0aDtcbiAgICB0aGlzLmN1cnJlbnQgPSBsZW4gPT09IDAgPyBudWxsIDogdGhpcy5zdGFja1tsZW4gLSAxXTtcblxuICAgIHJldHVybiBpdGVtID09PSB1bmRlZmluZWQgPyBudWxsIDogaXRlbTtcbiAgfVxuXG4gIGlzRW1wdHkoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuc3RhY2subGVuZ3RoID09PSAwO1xuICB9XG59XG4iXX0=