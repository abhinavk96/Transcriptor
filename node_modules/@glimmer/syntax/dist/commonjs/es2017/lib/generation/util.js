'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.escapeAttrValue = escapeAttrValue;
exports.escapeText = escapeText;
const ATTR_VALUE_REGEX_TEST = /[\xA0"&]/;
const ATTR_VALUE_REGEX_REPLACE = new RegExp(ATTR_VALUE_REGEX_TEST.source, 'g');
const TEXT_REGEX_TEST = /[\xA0&<>]/;
const TEXT_REGEX_REPLACE = new RegExp(TEXT_REGEX_TEST.source, 'g');
function attrValueReplacer(char) {
    switch (char.charCodeAt(0)) {
        case 160 /* NBSP */:
            return '&nbsp;';
        case 34 /* QUOT */:
            return '&quot;';
        case 38 /* AMP */:
            return '&amp;';
        default:
            return char;
    }
}
function textReplacer(char) {
    switch (char.charCodeAt(0)) {
        case 160 /* NBSP */:
            return '&nbsp;';
        case 38 /* AMP */:
            return '&amp;';
        case 60 /* LT */:
            return '&lt;';
        case 62 /* GT */:
            return '&gt;';
        default:
            return char;
    }
}
function escapeAttrValue(attrValue) {
    if (ATTR_VALUE_REGEX_TEST.test(attrValue)) {
        return attrValue.replace(ATTR_VALUE_REGEX_REPLACE, attrValueReplacer);
    }
    return attrValue;
}
function escapeText(text) {
    if (TEXT_REGEX_TEST.test(text)) {
        return text.replace(TEXT_REGEX_REPLACE, textReplacer);
    }
    return text;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL0BnbGltbWVyL3N5bnRheC9saWIvZ2VuZXJhdGlvbi91dGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O1FBMENnQixBQUFlO1FBT2YsQUFBVTtBQXpDMUIsTUFBTSxBQUFxQix3QkFBRyxBQUFVLEFBQUM7QUFDekMsTUFBTSxBQUF3QiwyQkFBRyxJQUFJLEFBQU0sT0FBQyxBQUFxQixzQkFBQyxBQUFNLFFBQUUsQUFBRyxBQUFDLEFBQUM7QUFFL0UsTUFBTSxBQUFlLGtCQUFHLEFBQVcsQUFBQztBQUNwQyxNQUFNLEFBQWtCLHFCQUFHLElBQUksQUFBTSxPQUFDLEFBQWUsZ0JBQUMsQUFBTSxRQUFFLEFBQUcsQUFBQyxBQUFDO0FBRW5FLFNBQVMsQUFBaUIsa0JBQUMsQUFBWSxNQUNyQztZQUFRLEFBQUksS0FBQyxBQUFVLFdBQUMsQUFBQyxBQUFDLEFBQUUsQUFDMUI7aUJBQ0U7bUJBQU8sQUFBUSxBQUFDLEFBQ2xCO2dCQUNFO21CQUFPLEFBQVEsQUFBQyxBQUNsQjtnQkFDRTttQkFBTyxBQUFPLEFBQUMsQUFDakI7QUFDRTttQkFBTyxBQUFJLEFBQUMsQUFDZixBQUNILEFBQUM7OztBQUVELFNBQVMsQUFBWSxhQUFDLEFBQVksTUFDaEM7WUFBUSxBQUFJLEtBQUMsQUFBVSxXQUFDLEFBQUMsQUFBQyxBQUFFLEFBQzFCO2lCQUNFO21CQUFPLEFBQVEsQUFBQyxBQUNsQjtnQkFDRTttQkFBTyxBQUFPLEFBQUMsQUFDakI7Z0JBQ0U7bUJBQU8sQUFBTSxBQUFDLEFBQ2hCO2dCQUNFO21CQUFPLEFBQU0sQUFBQyxBQUNoQjtBQUNFO21CQUFPLEFBQUksQUFBQyxBQUNmLEFBQ0gsQUFBQzs7QUFFRCxBQUFNO3lCQUEwQixBQUFpQixXQUMvQztRQUFJLEFBQXFCLHNCQUFDLEFBQUksS0FBQyxBQUFTLEFBQUMsWUFBRSxBQUN6QztlQUFPLEFBQVMsVUFBQyxBQUFPLFFBQUMsQUFBd0IsMEJBQUUsQUFBaUIsQUFBQyxBQUFDLEFBQ3ZFO0FBQ0Q7V0FBTyxBQUFTLEFBQUMsQUFDbkIsQUFBQztBQUVELEFBQU07b0JBQXFCLEFBQVksTUFDckM7UUFBSSxBQUFlLGdCQUFDLEFBQUksS0FBQyxBQUFJLEFBQUMsT0FBRSxBQUM5QjtlQUFPLEFBQUksS0FBQyxBQUFPLFFBQUMsQUFBa0Isb0JBQUUsQUFBWSxBQUFDLEFBQUMsQUFDdkQ7QUFDRDtXQUFPLEFBQUksQUFBQyxBQUNkLEFBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBlbnVtIENoYXIge1xuICBOQlNQID0gMHhhMCxcbiAgUVVPVCA9IDB4MjIsXG4gIExUID0gMHgzYyxcbiAgR1QgPSAweDNlLFxuICBBTVAgPSAweDI2LFxufVxuXG5jb25zdCBBVFRSX1ZBTFVFX1JFR0VYX1RFU1QgPSAvW1xceEEwXCImXS87XG5jb25zdCBBVFRSX1ZBTFVFX1JFR0VYX1JFUExBQ0UgPSBuZXcgUmVnRXhwKEFUVFJfVkFMVUVfUkVHRVhfVEVTVC5zb3VyY2UsICdnJyk7XG5cbmNvbnN0IFRFWFRfUkVHRVhfVEVTVCA9IC9bXFx4QTAmPD5dLztcbmNvbnN0IFRFWFRfUkVHRVhfUkVQTEFDRSA9IG5ldyBSZWdFeHAoVEVYVF9SRUdFWF9URVNULnNvdXJjZSwgJ2cnKTtcblxuZnVuY3Rpb24gYXR0clZhbHVlUmVwbGFjZXIoY2hhcjogc3RyaW5nKSB7XG4gIHN3aXRjaCAoY2hhci5jaGFyQ29kZUF0KDApKSB7XG4gICAgY2FzZSBDaGFyLk5CU1A6XG4gICAgICByZXR1cm4gJyZuYnNwOyc7XG4gICAgY2FzZSBDaGFyLlFVT1Q6XG4gICAgICByZXR1cm4gJyZxdW90Oyc7XG4gICAgY2FzZSBDaGFyLkFNUDpcbiAgICAgIHJldHVybiAnJmFtcDsnO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gY2hhcjtcbiAgfVxufVxuXG5mdW5jdGlvbiB0ZXh0UmVwbGFjZXIoY2hhcjogc3RyaW5nKSB7XG4gIHN3aXRjaCAoY2hhci5jaGFyQ29kZUF0KDApKSB7XG4gICAgY2FzZSBDaGFyLk5CU1A6XG4gICAgICByZXR1cm4gJyZuYnNwOyc7XG4gICAgY2FzZSBDaGFyLkFNUDpcbiAgICAgIHJldHVybiAnJmFtcDsnO1xuICAgIGNhc2UgQ2hhci5MVDpcbiAgICAgIHJldHVybiAnJmx0Oyc7XG4gICAgY2FzZSBDaGFyLkdUOlxuICAgICAgcmV0dXJuICcmZ3Q7JztcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGNoYXI7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVzY2FwZUF0dHJWYWx1ZShhdHRyVmFsdWU6IHN0cmluZykge1xuICBpZiAoQVRUUl9WQUxVRV9SRUdFWF9URVNULnRlc3QoYXR0clZhbHVlKSkge1xuICAgIHJldHVybiBhdHRyVmFsdWUucmVwbGFjZShBVFRSX1ZBTFVFX1JFR0VYX1JFUExBQ0UsIGF0dHJWYWx1ZVJlcGxhY2VyKTtcbiAgfVxuICByZXR1cm4gYXR0clZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlVGV4dCh0ZXh0OiBzdHJpbmcpIHtcbiAgaWYgKFRFWFRfUkVHRVhfVEVTVC50ZXN0KHRleHQpKSB7XG4gICAgcmV0dXJuIHRleHQucmVwbGFjZShURVhUX1JFR0VYX1JFUExBQ0UsIHRleHRSZXBsYWNlcik7XG4gIH1cbiAgcmV0dXJuIHRleHQ7XG59XG4iXX0=